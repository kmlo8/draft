{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function Header() {\n  const { isAuthenticated, user } = useAuth();\n\n  const clearSearchState = () => {\n    try {\n      sessionStorage.removeItem('search_state_v1');\n    } catch (e) {\n      // Ignore errors\n    }\n  };\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-b border-gray-800\">\n      <div className=\"container mx-auto px-4 py-4 flex items-center justify-between\">\n        {/* Logo */}\n        <Link href=\"/\" onClick={clearSearchState} className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-red-600 flex items-center justify-center rounded\">\n            <svg className=\"w-6 h-6 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <rect x=\"2\" y=\"4\" width=\"16\" height=\"12\" rx=\"1\" />\n              <rect x=\"4\" y=\"7\" width=\"5\" height=\"3\" fill=\"black\" />\n              <rect x=\"11\" y=\"7\" width=\"5\" height=\"3\" fill=\"black\" />\n            </svg>\n          </div>\n          <span className=\"text-white text-xl font-bold\">MovieFlix</span>\n        </Link>\n\n        {/* Navigation */}\n        <nav className=\"flex items-center gap-6\">\n          <Link href=\"/\" onClick={clearSearchState} className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n            </svg>\n            <span>홈</span>\n          </Link>\n\n          <Link href=\"/search\" className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n            </svg>\n            <span>검색</span>\n          </Link>\n\n          {isAuthenticated ? (\n            <Link href=\"/user\" onClick={clearSearchState} className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n              <span>마이페이지</span>\n            </Link>\n          ) : (\n            <Link href=\"/login\" className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition\">\n              로그인\n            </Link>\n          )}\n        </nav>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,iLAAO;IAEzC,MAAM,mBAAmB;QACvB,IAAI;YACF,eAAe,UAAU,CAAC;QAC5B,EAAE,OAAO,GAAG;QACV,gBAAgB;QAClB;IACF;IAEA,qBACE,6RAAC;QAAO,WAAU;kBAChB,cAAA,6RAAC;YAAI,WAAU;;8BAEb,6RAAC,sNAAI;oBAAC,MAAK;oBAAI,SAAS;oBAAkB,WAAU;;sCAClD,6RAAC;4BAAI,WAAU;sCACb,cAAA,6RAAC;gCAAI,WAAU;gCAAqB,MAAK;gCAAe,SAAQ;;kDAC9D,6RAAC;wCAAK,GAAE;wCAAI,GAAE;wCAAI,OAAM;wCAAK,QAAO;wCAAK,IAAG;;;;;;kDAC5C,6RAAC;wCAAK,GAAE;wCAAI,GAAE;wCAAI,OAAM;wCAAI,QAAO;wCAAI,MAAK;;;;;;kDAC5C,6RAAC;wCAAK,GAAE;wCAAK,GAAE;wCAAI,OAAM;wCAAI,QAAO;wCAAI,MAAK;;;;;;;;;;;;;;;;;sCAGjD,6RAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;8BAIjD,6RAAC;oBAAI,WAAU;;sCACb,6RAAC,sNAAI;4BAAC,MAAK;4BAAI,SAAS;4BAAkB,WAAU;;8CAClD,6RAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6RAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6RAAC;8CAAK;;;;;;;;;;;;sCAGR,6RAAC,sNAAI;4BAAC,MAAK;4BAAU,WAAU;;8CAC7B,6RAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6RAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6RAAC;8CAAK;;;;;;;;;;;;wBAGP,gCACC,6RAAC,sNAAI;4BAAC,MAAK;4BAAQ,SAAS;4BAAkB,WAAU;;8CACtD,6RAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6RAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6RAAC;8CAAK;;;;;;;;;;;iDAGR,6RAAC,sNAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAsE;;;;;;;;;;;;;;;;;;;;;;;AAQhH","debugId":null}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/app/questionnaire/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { userAPI, actorsAPI, directorsAPI } from '@/lib/api';\nimport Header from '@/components/Header';\n\nconst GENRES = [\n  '드라마', '액션', '코미디', '로맨스', '스릴러', '공포',\n  'SF', '판타지', '애니메이션', '다큐멘터리', '범죄', '가족'\n];\n\nconst genreMapReverse: Record<string, string> = {\n  'Action': '액션', 'Drama': '드라마', 'Comedy': '코미디', 'Romance': '로맨스',\n  'Thriller': '스릴러', 'Horror': '공포', 'Science Fiction': 'SF', 'Fantasy': '판타지',\n  'Animation': '애니메이션', 'Documentary': '다큐멘터리', 'Crime': '범죄', 'Family': '가족'\n};\n\nexport default function QuestionnairePage() {\n  const router = useRouter();\n  const { user, updateUser } = useAuth();\n  const [selectedGenres, setSelectedGenres] = useState<string[]>([]);\n  const [selectedActors, setSelectedActors] = useState<string[]>([]);\n  const [selectedDirectors, setSelectedDirectors] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [loadingPrefs, setLoadingPrefs] = useState(true);\n\n  useEffect(() => {\n    if (user) {\n      const koreanGenres = user.preferredGenres?.map(g => genreMapReverse[g] || g).filter(g => GENRES.includes(g)) || [];\n      setSelectedGenres(koreanGenres);\n      setSelectedActors(user.preferredActors || []);\n      setSelectedDirectors(user.preferredDirectors || []);\n    }\n    setLoadingPrefs(false);\n  }, [user]);\n\n  const toggleGenre = (genre: string) => {\n    setSelectedGenres(prev => prev.includes(genre) ? prev.filter(g => g !== genre) : [...prev, genre]);\n  };\n\n  const handleAddItem = (item: string, type: 'actor' | 'director') => {\n    if (type === 'actor') {\n      setSelectedActors(prev => [...new Set([...prev, item])]);\n    } else {\n      setSelectedDirectors(prev => [...new Set([...prev, item])]);\n    }\n  };\n\n  const handleRemoveItem = (item: string, type: 'actor' | 'director') => {\n    if (type === 'actor') {\n      setSelectedActors(prev => prev.filter(i => i !== item));\n    } else {\n      setSelectedDirectors(prev => prev.filter(i => i !== item));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (selectedGenres.length === 0) {\n      setError('최소 1개의 장르를 선택해주세요');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      await updateUser({\n        preferredGenres: selectedGenres,\n        preferredActors: selectedActors,\n        preferredDirectors: selectedDirectors,\n      });\n      router.push(sessionStorage.getItem('questionnaire_from_mypage') === 'true' ? '/user' : '/');\n      sessionStorage.removeItem('questionnaire_from_mypage');\n    } catch (err: any) {\n      setError(err.response?.data?.error || '저장에 실패했습니다');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loadingPrefs) {\n    return <div className=\"min-h-screen bg-black text-white\"><Header /><div className=\"text-center py-16\">설정을 불러오는 중...</div></div>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <Header />\n      <div className=\"container mx-auto px-4 pt-24 pb-16\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <h1 className=\"text-4xl font-bold mb-4\">좋아하는 영화 취향을 알려주세요</h1>\n            <p className=\"text-gray-400\">더 정확한 추천을 위해 선호하는 장르, 배우, 감독을 알려주세요.</p>\n          </div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"bg-gray-900 rounded-lg p-8 mb-6\">\n              <h2 className=\"text-xl font-semibold mb-6\">선호 장르 선택 (최소 1개)</h2>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                {GENRES.map(g => <button key={g} type=\"button\" onClick={() => toggleGenre(g)} className={`px-6 py-3 rounded-lg border-2 transition ${selectedGenres.includes(g) ? 'bg-red-600 border-red-600' : 'bg-gray-800 border-gray-700 hover:border-red-500'}`}>{g}</button>)}\n              </div>\n            </div>\n            <SearchableList title=\"선호 배우\" items={selectedActors} onAdd={(item) => handleAddItem(item, 'actor')} onRemove={(item) => handleRemoveItem(item, 'actor')} searchFn={actorsAPI.search} />\n            <SearchableList title=\"선호 감독\" items={selectedDirectors} onAdd={(item) => handleAddItem(item, 'director')} onRemove={(item) => handleRemoveItem(item, 'director')} searchFn={directorsAPI.search} />\n            {error && <div className=\"bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded my-6\">{error}</div>}\n            <div className=\"flex gap-4 mt-8\">\n              <button type=\"button\" onClick={() => router.push('/')} className=\"flex-1 px-6 py-3 bg-gray-800 rounded-lg hover:bg-gray-700\">나중에 하기</button>\n              <button type=\"submit\" disabled={loading || selectedGenres.length === 0} className=\"flex-1 px-6 py-3 bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50\">완료</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface SearchableListProps {\n  title: string;\n  items: string[];\n  onAdd: (item: string) => void;\n  onRemove: (item: string) => void;\n  searchFn: (query: string) => Promise<any>;\n}\n\nfunction SearchableList({ title, items, onAdd, onRemove, searchFn }: SearchableListProps) {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState<any[]>([]);\n\n  const handleSearch = async (q: string) => {\n    setQuery(q);\n    if (q.length > 1) {\n      const res = await searchFn(q);\n      setResults(res.data.actors || res.data.directors || []);\n    } else {\n      setResults([]);\n    }\n  };\n\n  return (\n    <div className=\"bg-gray-900 rounded-lg p-8 mb-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">{title}</h2>\n      <input type=\"text\" value={query} onChange={(e) => handleSearch(e.target.value)} placeholder={`${title} 검색...`} className=\"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg mb-4\" />\n      {results.length > 0 && (\n        <div className=\"max-h-40 overflow-y-auto mb-4\">\n          {results.map(r => <div key={r.id} onClick={() => { onAdd(r.name); setQuery(''); setResults([]); }} className=\"p-2 hover:bg-gray-700 cursor-pointer\">{r.name}</div>)}\n        </div>\n      )}\n      <div className=\"flex flex-wrap gap-2\">\n        {items.map(item => <div key={item} className=\"bg-red-600/20 text-red-300 px-3 py-1 rounded-full flex items-center gap-2\">{item} <button type=\"button\" onClick={() => onRemove(item)}>×</button></div>)}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}