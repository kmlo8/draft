{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/MoviePosterOverlay.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { likesAPI } from '@/lib/api';\n\ntype Props = {\n  movieId: string;\n  rating?: string;\n  initiallyLiked?: boolean;\n  onLikeChange?: (liked: boolean) => void;\n};\n\nexport default function MoviePosterOverlay({\n  movieId, \n  rating, \n  initiallyLiked = false,\n  onLikeChange \n}: Props) {\n  const router = useRouter();\n  const { isAuthenticated } = useAuth();\n  const [liked, setLiked] = useState<boolean>(initiallyLiked);\n  const [pending, setPending] = useState<boolean>(false);\n\n  const toggleLike = async (e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent navigation when clicking like button\n\n    if (!isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n\n    if (pending) return;\n    setPending(true);\n    try {\n      if (!liked) {\n        console.log('Frontend: Liking Movie. Type: Movie, ID:', movieId);\n        await likesAPI.create('Movie', movieId);\n        setLiked(true);\n        onLikeChange?.(true);\n      } else {\n        console.log('Frontend: Unliking Movie. Type: Movie, ID:', movieId);\n        await likesAPI.deleteByTarget('Movie', movieId);\n        setLiked(false);\n        onLikeChange?.(false);\n      }\n    } catch (e) {\n      console.error('Frontend: Error toggling like:', e);\n      // ignore errors for now\n    } finally {\n      setPending(false);\n    }\n  };\n\n  return (\n    <div className=\"absolute top-2 right-2 flex items-center gap-2 z-10\">\n      {/* Rating */}\n      {rating && (\n        <div className=\"bg-black/70 backdrop-blur-sm text-white px-2 py-1 rounded text-xs font-semibold\">\n          {rating}\n        </div>\n      )}\n      \n      {/* Like Button */}\n      <button\n        onClick={toggleLike}\n        disabled={pending}\n        className={`p-1.5 rounded-full transition ${\n          liked \n            ? 'text-white'\n            : 'bg-black/70 backdrop-blur-sm hover:bg-black/90 text-white'\n        } disabled:opacity-50`}\n        style={{\n          backgroundColor: liked ? '#dc2626' : '',\n        }}\n        onMouseOver={(e) => {\n          if (liked) {\n            e.currentTarget.style.backgroundColor = '#c52222';\n          }\n        }}\n        onMouseOut={(e) => {\n          if (liked) {\n            e.currentTarget.style.backgroundColor = '#dc2626';\n          }\n        }}\n        aria-label={liked ? '좋아요 취소' : '좋아요'}\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill={liked ? '#dc2626' : 'none'}\n          stroke=\"currentColor\"\n          strokeWidth={2}\n          className=\"w-4 h-4\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.737-.715-1.611-2.377-2.737-4.313-2.737C5.099 3.75 3 5.765 3 8.25c0 7.125 9 12 9 12s9-4.875 9-12z\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAce,SAAS,mBAAmB,EACzC,OAAO,EACP,MAAM,EACN,iBAAiB,KAAK,EACtB,YAAY,EACN;IACN,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,iLAAO;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gQAAQ,EAAU;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gQAAQ,EAAU;IAEhD,MAAM,aAAa,OAAO;QACxB,EAAE,eAAe,IAAI,+CAA+C;QAEpE,IAAI,CAAC,iBAAiB;YACpB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,SAAS;QACb,WAAW;QACX,IAAI;YACF,IAAI,CAAC,OAAO;gBACV,QAAQ,GAAG,CAAC,4CAA4C;gBACxD,MAAM,qKAAQ,CAAC,MAAM,CAAC,SAAS;gBAC/B,SAAS;gBACT,eAAe;YACjB,OAAO;gBACL,QAAQ,GAAG,CAAC,8CAA8C;gBAC1D,MAAM,qKAAQ,CAAC,cAAc,CAAC,SAAS;gBACvC,SAAS;gBACT,eAAe;YACjB;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,kCAAkC;QAChD,wBAAwB;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6RAAC;QAAI,WAAU;;YAEZ,wBACC,6RAAC;gBAAI,WAAU;0BACZ;;;;;;0BAKL,6RAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAW,CAAC,8BAA8B,EACxC,QACI,eACA,4DACL,oBAAoB,CAAC;gBACtB,OAAO;oBACL,iBAAiB,QAAQ,YAAY;gBACvC;gBACA,aAAa,CAAC;oBACZ,IAAI,OAAO;wBACT,EAAE,aAAa,CAAC,KAAK,CAAC,eAAe,GAAG;oBAC1C;gBACF;gBACA,YAAY,CAAC;oBACX,IAAI,OAAO;wBACT,EAAE,aAAa,CAAC,KAAK,CAAC,eAAe,GAAG;oBAC1C;gBACF;gBACA,cAAY,QAAQ,WAAW;0BAE/B,cAAA,6RAAC;oBACC,OAAM;oBACN,SAAQ;oBACR,MAAM,QAAQ,YAAY;oBAC1B,QAAO;oBACP,aAAa;oBACb,WAAU;8BAEV,cAAA,6RAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,GAAE;;;;;;;;;;;;;;;;;;;;;;AAMd","debugId":null}}]
}