{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function Header() {\n  const { isAuthenticated, user } = useAuth();\n\n  const clearSearchState = () => {\n    try {\n      sessionStorage.removeItem('search_state_v1');\n    } catch (e) {\n      // Ignore errors\n    }\n  };\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-b border-gray-800\">\n      <div className=\"container mx-auto px-4 py-4 flex items-center justify-between\">\n        {/* Logo */}\n        <Link href=\"/\" onClick={clearSearchState} className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-red-600 flex items-center justify-center rounded\">\n            <svg className=\"w-6 h-6 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <rect x=\"2\" y=\"4\" width=\"16\" height=\"12\" rx=\"1\" />\n              <rect x=\"4\" y=\"7\" width=\"5\" height=\"3\" fill=\"black\" />\n              <rect x=\"11\" y=\"7\" width=\"5\" height=\"3\" fill=\"black\" />\n            </svg>\n          </div>\n          <span className=\"text-white text-xl font-bold\">MovieFlix</span>\n        </Link>\n\n        {/* Navigation */}\n        <nav className=\"flex items-center gap-6\">\n          <Link href=\"/\" onClick={clearSearchState} className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n            </svg>\n            <span>홈</span>\n          </Link>\n\n          <Link href=\"/search\" className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n            </svg>\n            <span>검색</span>\n          </Link>\n\n          {isAuthenticated ? (\n            <Link href=\"/user\" onClick={clearSearchState} className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n              <span>마이페이지</span>\n            </Link>\n          ) : (\n            <Link href=\"/login\" className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition\">\n              로그인\n            </Link>\n          )}\n        </nav>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,iLAAO;IAEzC,MAAM,mBAAmB;QACvB,IAAI;YACF,eAAe,UAAU,CAAC;QAC5B,EAAE,OAAO,GAAG;QACV,gBAAgB;QAClB;IACF;IAEA,qBACE,6RAAC;QAAO,WAAU;kBAChB,cAAA,6RAAC;YAAI,WAAU;;8BAEb,6RAAC,sNAAI;oBAAC,MAAK;oBAAI,SAAS;oBAAkB,WAAU;;sCAClD,6RAAC;4BAAI,WAAU;sCACb,cAAA,6RAAC;gCAAI,WAAU;gCAAqB,MAAK;gCAAe,SAAQ;;kDAC9D,6RAAC;wCAAK,GAAE;wCAAI,GAAE;wCAAI,OAAM;wCAAK,QAAO;wCAAK,IAAG;;;;;;kDAC5C,6RAAC;wCAAK,GAAE;wCAAI,GAAE;wCAAI,OAAM;wCAAI,QAAO;wCAAI,MAAK;;;;;;kDAC5C,6RAAC;wCAAK,GAAE;wCAAK,GAAE;wCAAI,OAAM;wCAAI,QAAO;wCAAI,MAAK;;;;;;;;;;;;;;;;;sCAGjD,6RAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;8BAIjD,6RAAC;oBAAI,WAAU;;sCACb,6RAAC,sNAAI;4BAAC,MAAK;4BAAI,SAAS;4BAAkB,WAAU;;8CAClD,6RAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6RAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6RAAC;8CAAK;;;;;;;;;;;;sCAGR,6RAAC,sNAAI;4BAAC,MAAK;4BAAU,WAAU;;8CAC7B,6RAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6RAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6RAAC;8CAAK;;;;;;;;;;;;wBAGP,gCACC,6RAAC,sNAAI;4BAAC,MAAK;4BAAQ,SAAS;4BAAkB,WAAU;;8CACtD,6RAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6RAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6RAAC;8CAAK;;;;;;;;;;;iDAGR,6RAAC,sNAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAsE;;;;;;;;;;;;;;;;;;;;;;;AAQhH","debugId":null}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/MoviePosterOverlay.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { likesAPI } from '@/lib/api';\n\ntype Props = {\n  movieId: string;\n  rating?: string;\n  initiallyLiked?: boolean;\n  onLikeChange?: (liked: boolean) => void;\n};\n\nexport default function MoviePosterOverlay({\n  movieId, \n  rating, \n  initiallyLiked = false,\n  onLikeChange \n}: Props) {\n  const router = useRouter();\n  const { isAuthenticated } = useAuth();\n  const [liked, setLiked] = useState<boolean>(initiallyLiked);\n  const [pending, setPending] = useState<boolean>(false);\n\n  const toggleLike = async (e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent navigation when clicking like button\n\n    if (!isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n\n    if (pending) return;\n    setPending(true);\n    try {\n      if (!liked) {\n        console.log('Frontend: Liking Movie. Type: Movie, ID:', movieId);\n        await likesAPI.create('Movie', movieId);\n        setLiked(true);\n        onLikeChange?.(true);\n      } else {\n        console.log('Frontend: Unliking Movie. Type: Movie, ID:', movieId);\n        await likesAPI.deleteByTarget('Movie', movieId);\n        setLiked(false);\n        onLikeChange?.(false);\n      }\n    } catch (e) {\n      console.error('Frontend: Error toggling like:', e);\n      // ignore errors for now\n    } finally {\n      setPending(false);\n    }\n  };\n\n  return (\n    <div className=\"absolute top-2 right-2 flex items-center gap-2 z-10\">\n      {/* Rating */}\n      {rating && (\n        <div className=\"bg-black/70 backdrop-blur-sm text-white px-2 py-1 rounded text-xs font-semibold\">\n          {rating}\n        </div>\n      )}\n      \n      {/* Like Button */}\n      <button\n        onClick={toggleLike}\n        disabled={pending}\n        className={`p-1.5 rounded-full transition ${\n          liked \n            ? 'text-white'\n            : 'bg-black/70 backdrop-blur-sm hover:bg-black/90 text-white'\n        } disabled:opacity-50`}\n        style={{\n          backgroundColor: liked ? '#dc2626' : '',\n        }}\n        onMouseOver={(e) => {\n          if (liked) {\n            e.currentTarget.style.backgroundColor = '#c52222';\n          }\n        }}\n        onMouseOut={(e) => {\n          if (liked) {\n            e.currentTarget.style.backgroundColor = '#dc2626';\n          }\n        }}\n        aria-label={liked ? '좋아요 취소' : '좋아요'}\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill={liked ? '#dc2626' : 'none'}\n          stroke=\"currentColor\"\n          strokeWidth={2}\n          className=\"w-4 h-4\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.737-.715-1.611-2.377-2.737-4.313-2.737C5.099 3.75 3 5.765 3 8.25c0 7.125 9 12 9 12s9-4.875 9-12z\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAce,SAAS,mBAAmB,EACzC,OAAO,EACP,MAAM,EACN,iBAAiB,KAAK,EACtB,YAAY,EACN;IACN,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,iLAAO;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gQAAQ,EAAU;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gQAAQ,EAAU;IAEhD,MAAM,aAAa,OAAO;QACxB,EAAE,eAAe,IAAI,+CAA+C;QAEpE,IAAI,CAAC,iBAAiB;YACpB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,SAAS;QACb,WAAW;QACX,IAAI;YACF,IAAI,CAAC,OAAO;gBACV,QAAQ,GAAG,CAAC,4CAA4C;gBACxD,MAAM,qKAAQ,CAAC,MAAM,CAAC,SAAS;gBAC/B,SAAS;gBACT,eAAe;YACjB,OAAO;gBACL,QAAQ,GAAG,CAAC,8CAA8C;gBAC1D,MAAM,qKAAQ,CAAC,cAAc,CAAC,SAAS;gBACvC,SAAS;gBACT,eAAe;YACjB;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,kCAAkC;QAChD,wBAAwB;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6RAAC;QAAI,WAAU;;YAEZ,wBACC,6RAAC;gBAAI,WAAU;0BACZ;;;;;;0BAKL,6RAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAW,CAAC,8BAA8B,EACxC,QACI,eACA,4DACL,oBAAoB,CAAC;gBACtB,OAAO;oBACL,iBAAiB,QAAQ,YAAY;gBACvC;gBACA,aAAa,CAAC;oBACZ,IAAI,OAAO;wBACT,EAAE,aAAa,CAAC,KAAK,CAAC,eAAe,GAAG;oBAC1C;gBACF;gBACA,YAAY,CAAC;oBACX,IAAI,OAAO;wBACT,EAAE,aAAa,CAAC,KAAK,CAAC,eAAe,GAAG;oBAC1C;gBACF;gBACA,cAAY,QAAQ,WAAW;0BAE/B,cAAA,6RAAC;oBACC,OAAM;oBACN,SAAQ;oBACR,MAAM,QAAQ,YAAY;oBAC1B,QAAO;oBACP,aAAa;oBACb,WAAU;8BAEV,cAAA,6RAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,GAAE;;;;;;;;;;;;;;;;;;;;;;AAMd","debugId":null}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/Carousel.tsx"],"sourcesContent":["'use client';\n\nimport { useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport MoviePosterOverlay from './MoviePosterOverlay';\n\ninterface Movie {\n  id: number;\n  title: string;\n  year: string;\n  posterUrl?: string;\n  rating?: number;\n  userLiked?: boolean;\n  genres?: string[];\n}\n\ninterface CarouselProps {\n  title: string;\n  movies: Movie[];\n  loading: boolean;\n  onLikeChange: () => void;\n  hideEmptyMessage?: boolean;\n}\n\nexport default function Carousel({ title, movies, loading, onLikeChange, hideEmptyMessage = false }: CarouselProps) {\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n\n  const handleScroll = (direction: 'left' | 'right') => {\n    if (scrollRef.current) {\n      const scrollAmount = scrollRef.current.offsetWidth * 0.8;\n      scrollRef.current.scrollBy({\n        left: direction === 'left' ? -scrollAmount : scrollAmount,\n        behavior: 'smooth',\n      });\n    }\n  };\n\n  if (loading) {\n    return (\n      <section className=\"container mx-auto px-4 py-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\n        <div className=\"text-center py-8\"><p className=\"text-gray-400\">영화를 불러오는 중...</p></div>\n      </section>\n    );\n  }\n\n  if (movies.length === 0) {\n    if (hideEmptyMessage) {\n      return null;\n    }\n    return (\n      <section className=\"container mx-auto px-4 py-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\n        <div className=\"text-center py-8\"><p className=\"text-gray-400\">{title} 영화가 없습니다</p></div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"container mx-auto px-4 py-8\">\n      <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\n      <div className=\"relative group\">\n        <button\n          onClick={() => handleScroll('left')}\n          className=\"absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/80\"\n          aria-label=\"Scroll Left\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg>\n        </button>\n        \n        <div ref={scrollRef} className=\"flex gap-4 overflow-x-auto pb-4 scrollbar-hide\">\n          {movies.map((movie) => (\n            <div key={movie.id} onClick={() => router.push(`/movie/${movie.id}`)} className=\"flex-shrink-0 w-[180px] cursor-pointer\">\n              <div className=\"relative aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden mb-3 hover:ring-2 hover:ring-red-500 transition\">\n                {movie.posterUrl ? (\n                  <Image src={movie.posterUrl} alt={movie.title} width={180} height={270} className=\"w-full h-full object-cover\" />\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center text-gray-500 text-sm\">No Image</div>\n                )}\n                <MoviePosterOverlay movieId={movie.id.toString()} rating={movie.rating?.toString()} initiallyLiked={movie.userLiked} onLikeChange={onLikeChange} />\n              </div>\n              <h3 className=\"font-medium line-clamp-2 text-sm\">{movie.title}</h3>\n              <p className=\"text-xs text-gray-400\">{movie.year} {movie.genres?.[0] ? `• ${movie.genres[0]}` : ''}</p>\n            </div>\n          ))}\n        </div>\n\n        <button\n          onClick={() => handleScroll('right')}\n          className=\"absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/80\"\n          aria-label=\"Scroll Right\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg>\n        </button>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAyBe,SAAS,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,mBAAmB,KAAK,EAAiB;IAChH,MAAM,YAAY,IAAA,8PAAM,EAAiB;IACzC,MAAM,SAAS,IAAA,8LAAS;IAExB,MAAM,eAAe,CAAC;QACpB,IAAI,UAAU,OAAO,EAAE;YACrB,MAAM,eAAe,UAAU,OAAO,CAAC,WAAW,GAAG;YACrD,UAAU,OAAO,CAAC,QAAQ,CAAC;gBACzB,MAAM,cAAc,SAAS,CAAC,eAAe;gBAC7C,UAAU;YACZ;QACF;IACF;IAEA,IAAI,SAAS;QACX,qBACE,6RAAC;YAAQ,WAAU;;8BACjB,6RAAC;oBAAG,WAAU;8BAA2B;;;;;;8BACzC,6RAAC;oBAAI,WAAU;8BAAmB,cAAA,6RAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAGrE;IAEA,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,IAAI,kBAAkB;YACpB,OAAO;QACT;QACA,qBACE,6RAAC;YAAQ,WAAU;;8BACjB,6RAAC;oBAAG,WAAU;8BAA2B;;;;;;8BACzC,6RAAC;oBAAI,WAAU;8BAAmB,cAAA,6RAAC;wBAAE,WAAU;;4BAAiB;4BAAM;;;;;;;;;;;;;;;;;;IAG5E;IAEA,qBACE,6RAAC;QAAQ,WAAU;;0BACjB,6RAAC;gBAAG,WAAU;0BAA2B;;;;;;0BACzC,6RAAC;gBAAI,WAAU;;kCACb,6RAAC;wBACC,SAAS,IAAM,aAAa;wBAC5B,WAAU;wBACV,cAAW;kCAEX,cAAA,6RAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAAqB,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCAAe,cAAA,6RAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;kCAGpM,6RAAC;wBAAI,KAAK;wBAAW,WAAU;kCAC5B,OAAO,GAAG,CAAC,CAAC,sBACX,6RAAC;gCAAmB,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gCAAG,WAAU;;kDAC9E,6RAAC;wCAAI,WAAU;;4CACZ,MAAM,SAAS,iBACd,6RAAC,uLAAK;gDAAC,KAAK,MAAM,SAAS;gDAAE,KAAK,MAAM,KAAK;gDAAE,OAAO;gDAAK,QAAQ;gDAAK,WAAU;;;;;qEAElF,6RAAC;gDAAI,WAAU;0DAAuE;;;;;;0DAExF,6RAAC,2LAAkB;gDAAC,SAAS,MAAM,EAAE,CAAC,QAAQ;gDAAI,QAAQ,MAAM,MAAM,EAAE;gDAAY,gBAAgB,MAAM,SAAS;gDAAE,cAAc;;;;;;;;;;;;kDAErI,6RAAC;wCAAG,WAAU;kDAAoC,MAAM,KAAK;;;;;;kDAC7D,6RAAC;wCAAE,WAAU;;4CAAyB,MAAM,IAAI;4CAAC;4CAAE,MAAM,MAAM,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,MAAM,MAAM,CAAC,EAAE,EAAE,GAAG;;;;;;;;+BAVxF,MAAM,EAAE;;;;;;;;;;kCAetB,6RAAC;wBACC,SAAS,IAAM,aAAa;wBAC5B,WAAU;wBACV,cAAW;kCAEX,cAAA,6RAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAAqB,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCAAe,cAAA,6RAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAK5M","debugId":null}},
    {"offset": {"line": 643, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport { useAuth } from '@/context/AuthContext';\nimport { recommendationsAPI, userAPI, moviesAPI } from '@/lib/api';\nimport Header from '@/components/Header';\nimport Carousel from '@/components/Carousel';\n\n// Define types locally\ninterface Movie {\n  id: number;\n  title: string;\n  year: string;\n  posterUrl?: string;\n  rating?: number;\n  userLiked?: boolean;\n  genres?: string[];\n}\n\ninterface Section {\n  title: string;\n  movies: Movie[];\n  originalTitle?: string;\n}\n\n// Master list of genres in Korean to match DB\nconst ALL_GENRES = [\n  '액션', '드라마', '코미디', '로맨스', '스릴러', '공포',\n  'SF', '판타지', '애니메이션', '다큐멘터리', '범죄', '가족'\n];\n\nexport default function HomePage() {\n  const router = useRouter();\n  const { user, isAuthenticated, loading: authLoading } = useAuth();\n\n  // --- Search State ---\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<Movie[]>([]);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [loadingSearch, setLoadingSearch] = useState(false);\n  const [searchError, setSearchError] = useState('');\n\n  // --- Content State ---\n  const [newMovies, setNewMovies] = useState<Movie[]>([]);\n  const [userGenreSections, setUserGenreSections] = useState<Section[]>([]);\n  const [otherGenreSections, setOtherGenreSections] = useState<Section[]>([]);\n\n  // --- Loading Indicators ---\n  const [loadingNew, setLoadingNew] = useState(true);\n  const [loadingUserGenres, setLoadingUserGenres] = useState(true);\n  const [loadingOtherGenres, setLoadingOtherGenres] = useState(false);\n\n  // --- Main Data Fetching ---\n  const loadData = useCallback(async () => {\n    if (authLoading) return;\n\n    // 1. Always fetch \"New Movies\" immediately\n    setLoadingNew(true);\n    moviesAPI.getNew(20)\n        .then(res => setNewMovies(res.data.movies || []))\n        .catch(err => console.error('New movies failed', err))\n        .finally(() => setLoadingNew(false));\n\n    // 2. Logic to split \"User Liked\" vs \"The Rest\"\n    const userPrefs = (isAuthenticated && user?.preferredGenres) ? user.preferredGenres : [];\n    const restGenres = ALL_GENRES.filter(g => !userPrefs.includes(g));\n\n    // --- Phase 1: Load User Preferred Genres ---\n    setLoadingUserGenres(true);\n    if (userPrefs.length > 0) {\n      try {\n        const response = await moviesAPI.getByGenres(userPrefs);\n        const sections = response.data.sections || [];\n        setUserGenreSections(sections);\n      } catch (err) {\n        console.error('User genres failed:', err);\n      }\n    } else {\n      setUserGenreSections([]);\n    }\n    setLoadingUserGenres(false);\n\n    // --- Phase 2: Load Remaining Genres (Sequential) ---\n    // Only start fetching \"Other\" genres after determining user genres\n    if (restGenres.length > 0) {\n      setLoadingOtherGenres(true);\n      try {\n        const response = await moviesAPI.getByGenres(restGenres);\n        const sections = response.data.sections || [];\n        setOtherGenreSections(sections);\n      } catch (err) {\n        console.error('Other genres failed:', err);\n      } finally {\n        setLoadingOtherGenres(false);\n      }\n    }\n  }, [isAuthenticated, user, authLoading]);\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  // --- Search Handler ---\n  const handleSearch = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n    if (!query.trim()) return;\n\n    setLoadingSearch(true);\n    setSearchError('');\n    setHasSearched(true);\n    try {\n      const profileRes = await userAPI.getProfile();\n      const userPrefs = profileRes.data?.user || {};\n      const response = await recommendationsAPI.search(query, {\n        genres: userPrefs.preferredGenres,\n        actors: userPrefs.preferredActors,\n        years: userPrefs.preferredYears\n      });\n      setSearchResults(response.data.movies || []);\n    } catch (err) {\n      setSearchError('검색에 실패했습니다.');\n    } finally {\n      setLoadingSearch(false);\n      setQuery('');\n    }\n  };\n\n  return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <Header />\n\n        {/* Hero / Search Section */}\n        <section id=\"search\" className=\"relative min-h-[60vh] flex items-center justify-center\">\n          <div className=\"absolute inset-0 bg-gradient-to-b from-blue-900/20 to-black\"></div>\n          <div className=\"absolute inset-0\" style={{ backgroundImage: 'radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)', backgroundSize: '50px 50px' }}></div>\n          <div className=\"container mx-auto px-4 py-32 relative z-10\">\n            <div className=\"max-w-4xl mx-auto text-center\">\n\n              {/* UPDATED: Title & Subtitle */}\n              <div className=\"mb-8 animate-fade-in-up\">\n                <h1 className=\"text-4xl md:text-6xl font-bold mb-4 leading-tight\">\n                  {isAuthenticated && user?.name ? (\n                      <>\n                        <span className=\"text-red-500\">{user.name}</span>님을 위한 영화를 찾아드립니다\n                      </>\n                  ) : (\n                      \"당신을 위한 영화를 찾아드립니다\"\n                  )}\n                </h1>\n\n                {/* UPDATED TEXT HERE */}\n                {isAuthenticated ? (\n                    <p className=\"text-xl md:text-2xl text-gray-300 font-light\">\n                      선호하는 취향과 오늘의 기분에 맞춰 엄선된 추천작을 만나보세요.\n                    </p>\n                ) : (\n                    <p className=\"text-xl md:text-2xl text-gray-300 font-light\">\n                      오늘 당신의 마음을 움직일 특별한 이야기를 준비했습니다.\n                    </p>\n                )}\n              </div>\n\n              <form onSubmit={handleSearch} className=\"flex gap-4 mt-8\">\n                <input\n                    type=\"text\"\n                    value={query}\n                    onChange={(e) => setQuery(e.target.value)}\n                    placeholder=\"예: 우주를 배경으로 한 감동적인 영화\"\n                    className=\"flex-1 px-6 py-4 bg-gray-800/50 backdrop-blur border border-gray-700 rounded-lg focus:outline-none focus:border-red-500 text-lg\"\n                />\n                <button\n                    type=\"submit\"\n                    disabled={loadingSearch}\n                    className=\"px-8 py-4 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition disabled:opacity-50\"\n                >\n                  {loadingSearch ? '...' : '검색'}\n                </button>\n              </form>\n              {searchError && <div className=\"mt-4 text-red-500\">{searchError}</div>}\n            </div>\n          </div>\n        </section>\n\n        {/* Search Results */}\n        {hasSearched && (\n            <section className=\"container mx-auto px-4 py-8 relative z-10\">\n              <h2 className=\"text-2xl font-bold mb-6\">검색 결과</h2>\n              {loadingSearch ? <p>검색 중...</p> : (\n                  <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n                    {searchResults.map(movie => (\n                        <div key={movie.id} onClick={() => router.push(`/movie/${movie.id}`)} className=\"cursor-pointer group\">\n                          <div className=\"relative aspect-[2/3] bg-gray-800 rounded overflow-hidden mb-2\">\n                            {movie.posterUrl && <Image src={movie.posterUrl} alt={movie.title} fill className=\"object-cover group-hover:scale-105 transition\" />}\n                          </div>\n                          <h3 className=\"text-sm font-medium\">{movie.title}</h3>\n                        </div>\n                    ))}\n                  </div>\n              )}\n            </section>\n        )}\n\n        {/* Main Carousel Rows */}\n        <div className=\"pb-16 relative z-10 container mx-auto px-4\">\n\n          {/* 1. New Movies */}\n          <Carousel title=\"새로운 영화\" movies={newMovies} loading={loadingNew} />\n\n          {/* 2. User Liked Genres */}\n          {userGenreSections.length > 0 && (\n              <div className=\"mt-12 mb-8\">\n                <div className=\"flex items-center gap-2 mb-6 pl-2 border-l-4 border-red-600\">\n                  <h2 className=\"text-2xl font-bold text-red-500\">회원님을 위한 추천 장르</h2>\n                </div>\n                {userGenreSections.map(section => (\n                    <Carousel\n                        key={`user-${section.title}`}\n                        title={section.title}\n                        movies={section.movies}\n                        loading={loadingUserGenres}\n                    />\n                ))}\n              </div>\n          )}\n\n          {/* 3. Other Genres */}\n          {otherGenreSections.length > 0 && (\n              <div className=\"mt-16 mb-8\">\n                <div className=\"flex items-center gap-2 mb-6 pl-2 border-l-4 border-red-600\">\n                  <h2 className=\"text-2xl font-bold text-red-500\">다른 장르 탐험하기</h2>\n                </div>\n                {otherGenreSections.map(section => (\n                    <Carousel\n                        key={`other-${section.title}`}\n                        title={section.title}\n                        movies={section.movies}\n                        loading={loadingOtherGenres}\n                    />\n                ))}\n              </div>\n          )}\n\n          {/* Loader for Other Genres */}\n          {loadingOtherGenres && !loadingUserGenres && (\n              <div className=\"opacity-50 mt-12\">\n                <Carousel title=\"다른 장르 불러오는 중...\" movies={[]} loading={true} />\n              </div>\n          )}\n\n        </div>\n      </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}