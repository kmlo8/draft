{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function Header() {\n  const { isAuthenticated, user } = useAuth();\n\n  const clearSearchState = () => {\n    try {\n      sessionStorage.removeItem('search_state_v1');\n    } catch (e) {\n      // Ignore errors\n    }\n  };\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-b border-gray-800\">\n      <div className=\"container mx-auto px-4 py-4 flex items-center justify-between\">\n        {/* Logo */}\n        <Link href=\"/\" onClick={clearSearchState} className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-red-600 flex items-center justify-center rounded\">\n            <svg className=\"w-6 h-6 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <rect x=\"2\" y=\"4\" width=\"16\" height=\"12\" rx=\"1\" />\n              <rect x=\"4\" y=\"7\" width=\"5\" height=\"3\" fill=\"black\" />\n              <rect x=\"11\" y=\"7\" width=\"5\" height=\"3\" fill=\"black\" />\n            </svg>\n          </div>\n          <span className=\"text-white text-xl font-bold\">MovieFlix</span>\n        </Link>\n\n        {/* Navigation */}\n        <nav className=\"flex items-center gap-6\">\n          <Link href=\"/\" onClick={clearSearchState} className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n            </svg>\n            <span>홈</span>\n          </Link>\n\n          <Link href=\"/search\" className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n            </svg>\n            <span>검색</span>\n          </Link>\n\n          {isAuthenticated ? (\n            <Link href=\"/user\" onClick={clearSearchState} className=\"flex items-center gap-2 text-white hover:text-red-500 transition\">\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n              <span>마이페이지</span>\n            </Link>\n          ) : (\n            <Link href=\"/login\" className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition\">\n              로그인\n            </Link>\n          )}\n        </nav>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,oLAAO;IAEzC,MAAM,mBAAmB;QACvB,IAAI;YACF,eAAe,UAAU,CAAC;QAC5B,EAAE,OAAO,GAAG;QACV,gBAAgB;QAClB;IACF;IAEA,qBACE,4OAAC;QAAO,WAAU;kBAChB,cAAA,4OAAC;YAAI,WAAU;;8BAEb,4OAAC,yNAAI;oBAAC,MAAK;oBAAI,SAAS;oBAAkB,WAAU;;sCAClD,4OAAC;4BAAI,WAAU;sCACb,cAAA,4OAAC;gCAAI,WAAU;gCAAqB,MAAK;gCAAe,SAAQ;;kDAC9D,4OAAC;wCAAK,GAAE;wCAAI,GAAE;wCAAI,OAAM;wCAAK,QAAO;wCAAK,IAAG;;;;;;kDAC5C,4OAAC;wCAAK,GAAE;wCAAI,GAAE;wCAAI,OAAM;wCAAI,QAAO;wCAAI,MAAK;;;;;;kDAC5C,4OAAC;wCAAK,GAAE;wCAAK,GAAE;wCAAI,OAAM;wCAAI,QAAO;wCAAI,MAAK;;;;;;;;;;;;;;;;;sCAGjD,4OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;8BAIjD,4OAAC;oBAAI,WAAU;;sCACb,4OAAC,yNAAI;4BAAC,MAAK;4BAAI,SAAS;4BAAkB,WAAU;;8CAClD,4OAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,4OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,4OAAC;8CAAK;;;;;;;;;;;;sCAGR,4OAAC,yNAAI;4BAAC,MAAK;4BAAU,WAAU;;8CAC7B,4OAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,4OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,4OAAC;8CAAK;;;;;;;;;;;;wBAGP,gCACC,4OAAC,yNAAI;4BAAC,MAAK;4BAAQ,SAAS;4BAAkB,WAAU;;8CACtD,4OAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,4OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,4OAAC;8CAAK;;;;;;;;;;;iDAGR,4OAAC,yNAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAsE;;;;;;;;;;;;;;;;;;;;;;;AAQhH;GA1DwB;;QACY,oLAAO;;;KADnB","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/MoviePosterOverlay.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { likesAPI } from '@/lib/api';\n\ntype Props = {\n  movieId: string;\n  rating?: string;\n  initiallyLiked?: boolean;\n  onLikeChange?: (liked: boolean) => void;\n};\n\nexport default function MoviePosterOverlay({\n  movieId, \n  rating, \n  initiallyLiked = false,\n  onLikeChange \n}: Props) {\n  const router = useRouter();\n  const { isAuthenticated } = useAuth();\n  const [liked, setLiked] = useState<boolean>(initiallyLiked);\n  const [pending, setPending] = useState<boolean>(false);\n\n  const toggleLike = async (e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent navigation when clicking like button\n\n    if (!isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n\n    if (pending) return;\n    setPending(true);\n    try {\n      if (!liked) {\n        console.log('Frontend: Liking Movie. Type: Movie, ID:', movieId);\n        await likesAPI.create('Movie', movieId);\n        setLiked(true);\n        onLikeChange?.(true);\n      } else {\n        console.log('Frontend: Unliking Movie. Type: Movie, ID:', movieId);\n        await likesAPI.deleteByTarget('Movie', movieId);\n        setLiked(false);\n        onLikeChange?.(false);\n      }\n    } catch (e) {\n      console.error('Frontend: Error toggling like:', e);\n      // ignore errors for now\n    } finally {\n      setPending(false);\n    }\n  };\n\n  return (\n    <div className=\"absolute top-2 right-2 flex items-center gap-2 z-10\">\n      {/* Rating */}\n      {rating && (\n        <div className=\"bg-black/70 backdrop-blur-sm text-white px-2 py-1 rounded text-xs font-semibold\">\n          {rating}\n        </div>\n      )}\n      \n      {/* Like Button */}\n      <button\n        onClick={toggleLike}\n        disabled={pending}\n        className={`p-1.5 rounded-full transition ${\n          liked \n            ? 'text-white'\n            : 'bg-black/70 backdrop-blur-sm hover:bg-black/90 text-white'\n        } disabled:opacity-50`}\n        style={{\n          backgroundColor: liked ? '#dc2626' : '',\n        }}\n        onMouseOver={(e) => {\n          if (liked) {\n            e.currentTarget.style.backgroundColor = '#c52222';\n          }\n        }}\n        onMouseOut={(e) => {\n          if (liked) {\n            e.currentTarget.style.backgroundColor = '#dc2626';\n          }\n        }}\n        aria-label={liked ? '좋아요 취소' : '좋아요'}\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill={liked ? '#dc2626' : 'none'}\n          stroke=\"currentColor\"\n          strokeWidth={2}\n          className=\"w-4 h-4\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.737-.715-1.611-2.377-2.737-4.313-2.737C5.099 3.75 3 5.765 3 8.25c0 7.125 9 12 9 12s9-4.875 9-12z\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAce,SAAS,mBAAmB,EACzC,OAAO,EACP,MAAM,EACN,iBAAiB,KAAK,EACtB,YAAY,EACN;;IACN,MAAM,SAAS,IAAA,iMAAS;IACxB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,oLAAO;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wNAAQ,EAAU;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wNAAQ,EAAU;IAEhD,MAAM,aAAa,OAAO;QACxB,EAAE,eAAe,IAAI,+CAA+C;QAEpE,IAAI,CAAC,iBAAiB;YACpB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,SAAS;QACb,WAAW;QACX,IAAI;YACF,IAAI,CAAC,OAAO;gBACV,QAAQ,GAAG,CAAC,4CAA4C;gBACxD,MAAM,wKAAQ,CAAC,MAAM,CAAC,SAAS;gBAC/B,SAAS;gBACT,eAAe;YACjB,OAAO;gBACL,QAAQ,GAAG,CAAC,8CAA8C;gBAC1D,MAAM,wKAAQ,CAAC,cAAc,CAAC,SAAS;gBACvC,SAAS;gBACT,eAAe;YACjB;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,kCAAkC;QAChD,wBAAwB;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,4OAAC;QAAI,WAAU;;YAEZ,wBACC,4OAAC;gBAAI,WAAU;0BACZ;;;;;;0BAKL,4OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAW,CAAC,8BAA8B,EACxC,QACI,eACA,4DACL,oBAAoB,CAAC;gBACtB,OAAO;oBACL,iBAAiB,QAAQ,YAAY;gBACvC;gBACA,aAAa,CAAC;oBACZ,IAAI,OAAO;wBACT,EAAE,aAAa,CAAC,KAAK,CAAC,eAAe,GAAG;oBAC1C;gBACF;gBACA,YAAY,CAAC;oBACX,IAAI,OAAO;wBACT,EAAE,aAAa,CAAC,KAAK,CAAC,eAAe,GAAG;oBAC1C;gBACF;gBACA,cAAY,QAAQ,WAAW;0BAE/B,cAAA,4OAAC;oBACC,OAAM;oBACN,SAAQ;oBACR,MAAM,QAAQ,YAAY;oBAC1B,QAAO;oBACP,aAAa;oBACb,WAAU;8BAEV,cAAA,4OAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,GAAE;;;;;;;;;;;;;;;;;;;;;;AAMd;GA3FwB;;QAMP,iMAAS;QACI,oLAAO;;;KAPb","debugId":null}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/components/Carousel.tsx"],"sourcesContent":["'use client';\n\nimport { useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport MoviePosterOverlay from './MoviePosterOverlay';\n\ninterface Movie {\n  id: number;\n  title: string;\n  year: string;\n  posterUrl?: string;\n  rating?: number;\n  userLiked?: boolean;\n  genres?: string[];\n}\n\ninterface CarouselProps {\n  title: string;\n  movies: Movie[];\n  loading: boolean;\n  onLikeChange: () => void;\n  hideEmptyMessage?: boolean;\n}\n\nexport default function Carousel({ title, movies, loading, onLikeChange, hideEmptyMessage = false }: CarouselProps) {\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n\n  const handleScroll = (direction: 'left' | 'right') => {\n    if (scrollRef.current) {\n      const scrollAmount = scrollRef.current.offsetWidth * 0.8;\n      scrollRef.current.scrollBy({\n        left: direction === 'left' ? -scrollAmount : scrollAmount,\n        behavior: 'smooth',\n      });\n    }\n  };\n\n  if (loading) {\n    return (\n      <section className=\"container mx-auto px-4 py-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\n        <div className=\"text-center py-8\"><p className=\"text-gray-400\">영화를 불러오는 중...</p></div>\n      </section>\n    );\n  }\n\n  if (movies.length === 0) {\n    if (hideEmptyMessage) {\n      return null;\n    }\n    return (\n      <section className=\"container mx-auto px-4 py-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\n        <div className=\"text-center py-8\"><p className=\"text-gray-400\">{title} 영화가 없습니다</p></div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"container mx-auto px-4 py-8\">\n      <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\n      <div className=\"relative group\">\n        <button\n          onClick={() => handleScroll('left')}\n          className=\"absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/80\"\n          aria-label=\"Scroll Left\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg>\n        </button>\n        \n        <div ref={scrollRef} className=\"flex gap-4 overflow-x-auto pb-4 scrollbar-hide\">\n          {movies.map((movie) => (\n            <div key={movie.id} onClick={() => router.push(`/movie/${movie.id}`)} className=\"flex-shrink-0 w-[180px] cursor-pointer\">\n              <div className=\"relative aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden mb-3 hover:ring-2 hover:ring-red-500 transition\">\n                {movie.posterUrl ? (\n                  <Image src={movie.posterUrl} alt={movie.title} width={180} height={270} className=\"w-full h-full object-cover\" />\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center text-gray-500 text-sm\">No Image</div>\n                )}\n                <MoviePosterOverlay movieId={movie.id.toString()} rating={movie.rating?.toString()} initiallyLiked={movie.userLiked} onLikeChange={onLikeChange} />\n              </div>\n              <h3 className=\"font-medium line-clamp-2 text-sm\">{movie.title}</h3>\n              <p className=\"text-xs text-gray-400\">{movie.year} {movie.genres?.[0] ? `• ${movie.genres[0]}` : ''}</p>\n            </div>\n          ))}\n        </div>\n\n        <button\n          onClick={() => handleScroll('right')}\n          className=\"absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/80\"\n          aria-label=\"Scroll Right\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg>\n        </button>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAyBe,SAAS,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,mBAAmB,KAAK,EAAiB;;IAChH,MAAM,YAAY,IAAA,sNAAM,EAAiB;IACzC,MAAM,SAAS,IAAA,iMAAS;IAExB,MAAM,eAAe,CAAC;QACpB,IAAI,UAAU,OAAO,EAAE;YACrB,MAAM,eAAe,UAAU,OAAO,CAAC,WAAW,GAAG;YACrD,UAAU,OAAO,CAAC,QAAQ,CAAC;gBACzB,MAAM,cAAc,SAAS,CAAC,eAAe;gBAC7C,UAAU;YACZ;QACF;IACF;IAEA,IAAI,SAAS;QACX,qBACE,4OAAC;YAAQ,WAAU;;8BACjB,4OAAC;oBAAG,WAAU;8BAA2B;;;;;;8BACzC,4OAAC;oBAAI,WAAU;8BAAmB,cAAA,4OAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAGrE;IAEA,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,IAAI,kBAAkB;YACpB,OAAO;QACT;QACA,qBACE,4OAAC;YAAQ,WAAU;;8BACjB,4OAAC;oBAAG,WAAU;8BAA2B;;;;;;8BACzC,4OAAC;oBAAI,WAAU;8BAAmB,cAAA,4OAAC;wBAAE,WAAU;;4BAAiB;4BAAM;;;;;;;;;;;;;;;;;;IAG5E;IAEA,qBACE,4OAAC;QAAQ,WAAU;;0BACjB,4OAAC;gBAAG,WAAU;0BAA2B;;;;;;0BACzC,4OAAC;gBAAI,WAAU;;kCACb,4OAAC;wBACC,SAAS,IAAM,aAAa;wBAC5B,WAAU;wBACV,cAAW;kCAEX,cAAA,4OAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAAqB,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCAAe,cAAA,4OAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;kCAGpM,4OAAC;wBAAI,KAAK;wBAAW,WAAU;kCAC5B,OAAO,GAAG,CAAC,CAAC,sBACX,4OAAC;gCAAmB,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gCAAG,WAAU;;kDAC9E,4OAAC;wCAAI,WAAU;;4CACZ,MAAM,SAAS,iBACd,4OAAC,0LAAK;gDAAC,KAAK,MAAM,SAAS;gDAAE,KAAK,MAAM,KAAK;gDAAE,OAAO;gDAAK,QAAQ;gDAAK,WAAU;;;;;qEAElF,4OAAC;gDAAI,WAAU;0DAAuE;;;;;;0DAExF,4OAAC,8LAAkB;gDAAC,SAAS,MAAM,EAAE,CAAC,QAAQ;gDAAI,QAAQ,MAAM,MAAM,EAAE;gDAAY,gBAAgB,MAAM,SAAS;gDAAE,cAAc;;;;;;;;;;;;kDAErI,4OAAC;wCAAG,WAAU;kDAAoC,MAAM,KAAK;;;;;;kDAC7D,4OAAC;wCAAE,WAAU;;4CAAyB,MAAM,IAAI;4CAAC;4CAAE,MAAM,MAAM,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,MAAM,MAAM,CAAC,EAAE,EAAE,GAAG;;;;;;;;+BAVxF,MAAM,EAAE;;;;;;;;;;kCAetB,4OAAC;wBACC,SAAS,IAAM,aAAa;wBAC5B,WAAU;wBACV,cAAW;kCAEX,cAAA,4OAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAAqB,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCAAe,cAAA,4OAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAK5M;GA1EwB;;QAEP,iMAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 665, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/Desktop/aaaaaaaaaaa/draft/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport { useAuth } from '@/context/AuthContext';\nimport { recommendationsAPI, userAPI, moviesAPI } from '@/lib/api';\nimport Header from '@/components/Header';\nimport Carousel from '@/components/Carousel';\nimport { AxiosError } from 'axios';\n\ninterface Movie {\n  id: number;\n  title: string;\n  year: string;\n  posterUrl?: string;\n  rating?: number;\n  userLiked?: boolean;\n  genres?: string[];\n}\n\ninterface Section {\n  title: string;\n  movies: Movie[];\n  originalTitle?: string;\n}\n\nconst genreMapToKorean: Record<string, string> = {\n  'Action': '액션', 'Drama': '드라마', 'Comedy': '코미디', 'Romance': '로맨스',\n  'Thriller': '스릴러', 'Horror': '공포', 'Science Fiction': 'SF', 'Fantasy': '판타지',\n  'Animation': '애니메이션', 'Documentary': '다큐멘터리', 'Crime': '범죄', 'Family': '가족'\n};\n\nexport default function HomePage() {\n  const router = useRouter();\n  const { user, isAuthenticated } = useAuth();\n\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<Movie[]>([]);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [loadingSearch, setLoadingSearch] = useState(false);\n  const [searchError, setSearchError] = useState('');\n\n  const [newMovies, setNewMovies] = useState<Movie[]>([]);\n\n  // Split state to manage loading independently\n  const [userGenreSections, setUserGenreSections] = useState<Section[]>([]);\n  const [otherGenreSections, setOtherGenreSections] = useState<Section[]>([]);\n\n  const [loadingNewMovies, setLoadingNewMovies] = useState(false);\n  const [loadingUserGenres, setLoadingUserGenres] = useState(false);\n  const [loadingOtherGenres, setLoadingOtherGenres] = useState(false);\n\n  // Helper to map API response to Korean titles\n  const mapToKorean = useCallback((section: Section) => ({\n    ...section,\n    title: genreMapToKorean[section.title] || section.title,\n    originalTitle: section.title\n  }), []);\n\n  const loadNewMovies = useCallback(async () => {\n    setLoadingNewMovies(true);\n    try {\n      const response = await moviesAPI.getNew(20);\n      setNewMovies(response.data.movies || []);\n    } catch (err) {\n      console.error('Failed to load new movies:', err);\n      setNewMovies([]);\n    } finally {\n      setLoadingNewMovies(false);\n    }\n  }, []);\n\n  const loadGenreMovies = useCallback(async () => {\n    // 1. Identify Genres\n    const allGenres = Object.keys(genreMapToKorean);\n    const userGenres = (isAuthenticated && user?.preferredGenres) ? user.preferredGenres : [];\n    const restGenres = allGenres.filter(g => !userGenres.includes(g));\n\n    // --- PHASE 1: Load User Genres (High Priority) ---\n    setLoadingUserGenres(true);\n    if (userGenres.length > 0) {\n      try {\n        const response = await moviesAPI.getByGenres(userGenres);\n        const sections = response.data.sections || [];\n        setUserGenreSections(sections.map(mapToKorean));\n      } catch (err) {\n        console.error('Failed to load user genre movies:', err);\n        setUserGenreSections([]);\n      }\n    } else {\n      setUserGenreSections([]);\n    }\n    setLoadingUserGenres(false);\n\n    // --- PHASE 2: Load Remaining Genres (Low Priority) ---\n    setLoadingOtherGenres(true);\n    if (restGenres.length > 0) {\n      try {\n        const response = await moviesAPI.getByGenres(restGenres);\n        const sections = response.data.sections || [];\n        setOtherGenreSections(sections.map(mapToKorean));\n      } catch (err) {\n        console.error('Failed to load other genre movies:', err);\n        setOtherGenreSections([]);\n      }\n    } else {\n      setOtherGenreSections([]);\n    }\n    setLoadingOtherGenres(false);\n\n  }, [isAuthenticated, user?.preferredGenres, mapToKorean]);\n\n  useEffect(() => {\n    void loadNewMovies();\n    void loadGenreMovies();\n  }, [loadNewMovies, loadGenreMovies]);\n\n  const handleLikeChange = () => {\n    // Optional: Refresh logic\n  };\n\n  const handleSearch = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n    if (!query.trim()) return;\n\n    setLoadingSearch(true);\n    setSearchError('');\n    setHasSearched(true);\n    try {\n      const profileRes = await userAPI.getProfile();\n      const userPrefs = profileRes.data?.user ? {\n        genres: profileRes.data.user.preferredGenres || [],\n        actors: profileRes.data.user.preferredActors || [],\n        years: profileRes.data.user.preferredYears || { min: 1990, max: 2024 }\n      } : {};\n      const response = await recommendationsAPI.search(query, userPrefs);\n      setSearchResults(response.data.movies || []);\n    } catch (err: unknown) {\n      if (err instanceof AxiosError && err.response?.status === 503) {\n        setSearchError('추천 서비스를 사용할 수 없습니다.');\n      } else {\n        setSearchError('검색에 실패했습니다.');\n      }\n      setSearchResults([]);\n    } finally {\n      setLoadingSearch(false);\n      setQuery('');\n    }\n  };\n\n  return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <Header />\n        <section id=\"search\" className=\"relative min-h-[70vh] flex items-center justify-center\">\n          <div className=\"absolute inset-0 bg-gradient-to-b from-blue-900/20 to-black\"></div>\n          <div className=\"absolute inset-0\" style={{ backgroundImage: 'radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)', backgroundSize: '50px 50px' }}></div>\n          <div className=\"container mx-auto px-4 py-32 relative z-10\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h1 className=\"text-5xl md:text-6xl font-bold mb-6\">\n                {isAuthenticated && user?.name ? `${user.name}님` : '당신'}을 위한 완벽한 영화를 찾아드립니다\n              </h1>\n              <p className=\"text-xl text-gray-300 mb-12\">지금 보고 싶은 영화를 검색해보세요</p>\n              <form onSubmit={handleSearch} className=\"flex gap-4\">\n                <input type=\"text\" value={query} onChange={(e) => setQuery(e.target.value)} placeholder=\"예: 우주를 배경으로 한 감동적인 영화\" className=\"flex-1 px-6 py-4 bg-gray-800/50 backdrop-blur border border-gray-700 rounded-lg focus:outline-none focus:border-red-500 text-lg\" />\n                <button type=\"submit\" disabled={loadingSearch} className=\"px-8 py-4 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition disabled:opacity-50\">{loadingSearch ? '검색 중...' : '추천받기'}</button>\n              </form>\n              {searchError && <div className=\"mt-4 bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded\">{searchError}</div>}\n            </div>\n          </div>\n        </section>\n\n        {hasSearched && (\n            <section className=\"container mx-auto px-4 py-16 -mt-20 relative z-10\">\n              <h2 className=\"text-3xl font-bold mb-8\">검색 결과</h2>\n              {loadingSearch ? (\n                  <div className=\"text-center py-16\"><p className=\"text-gray-400\">추천 영화를 불러오는 중...</p></div>\n              ) : searchResults.length > 0 ? (\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6\">\n                    {searchResults.map((movie) => (\n                        <div key={movie.id} onClick={() => router.push(`/movie/${movie.id}`)} className=\"cursor-pointer\">\n                          <div className=\"relative aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden mb-3 hover:ring-2 hover:ring-red-500 transition\">\n                            {movie.posterUrl ? <Image src={movie.posterUrl} alt={movie.title} width={180} height={270} className=\"w-full h-full object-cover\" /> : <div className=\"w-full h-full flex items-center justify-center text-gray-500\">No Image</div>}\n                          </div>\n                          <h3 className=\"font-medium line-clamp-2\">{movie.title}</h3>\n                          <p className=\"text-sm text-gray-400\">{movie.year}</p>\n                        </div>\n                    ))}\n                  </div>\n              ) : (\n                  <div className=\"text-center py-16\"><p className=\"text-gray-400 text-lg\">추천 영화를 찾을 수 없습니다</p></div>\n              )}\n            </section>\n        )}\n\n        <div className={`pb-16 relative z-10 ${hasSearched ? 'pt-8' : '-mt-20'}`}>\n          {/* 1. New Movies */}\n          <Carousel title=\"새로운 영화\" movies={newMovies} loading={loadingNewMovies} onLikeChange={handleLikeChange} />\n\n          {/* 2. User Preferred Genres */}\n          {userGenreSections.map(section => (\n              <Carousel\n                  key={`user-genre-${section.originalTitle}`}\n                  title={section.title}\n                  movies={section.movies}\n                  loading={loadingUserGenres}\n                  onLikeChange={handleLikeChange}\n              />\n          ))}\n\n          {/* 3. Other Genres */}\n          {otherGenreSections.map(section => (\n              <Carousel\n                  key={`other-genre-${section.originalTitle}`}\n                  title={section.title}\n                  movies={section.movies}\n                  loading={loadingOtherGenres}\n                  onLikeChange={handleLikeChange}\n              />\n          ))}\n\n          {!isAuthenticated && !loadingUserGenres && !loadingOtherGenres && userGenreSections.length === 0 && otherGenreSections.length === 0 && (\n              <div className=\"container mx-auto px-4 py-8 text-center text-gray-400\">\n                <p>로그인하시면 맞춤형 추천을 해드립니다.</p>\n              </div>\n          )}\n        </div>\n      </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}